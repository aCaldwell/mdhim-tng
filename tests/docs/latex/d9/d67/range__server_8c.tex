\hypertarget{range__server_8c}{\section{src/range\-\_\-server.c File Reference}
\label{range__server_8c}\index{src/range\-\_\-server.\-c@{src/range\-\_\-server.\-c}}
}
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$linux/limits.\-h$>$}\\*
{\ttfamily \#include $<$sys/time.\-h$>$}\\*
{\ttfamily \#include \char`\"{}mdhim.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}range\-\_\-server.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}partitioner.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mdhim\-\_\-options.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{range__server_8c_a6b69ffdb719e4f7c525be5849b15135d}{im\-\_\-range\-\_\-server} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md)
\item 
int \hyperlink{range__server_8c_a9d1efa04e20d7fe6fa8d6e4aa6568c25}{send\-\_\-locally\-\_\-or\-\_\-remote} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md, int dest, void $\ast$message)
\item 
void \hyperlink{range__server_8c_a599eb8c7ba52257c76deca96460ac131}{set\-\_\-store\-\_\-opts} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md, struct \hyperlink{structmdhim__store__opts__t}{mdhim\-\_\-store\-\_\-opts\-\_\-t} $\ast$opts, int stat)
\item 
int \hyperlink{range__server_8c_ab006df9333fd5eace9b3123724c81e74}{update\-\_\-all\-\_\-stats} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md, void $\ast$key, uint32\-\_\-t key\-\_\-len)
\item 
int \hyperlink{range__server_8c_a928bd7ba32d87bcb0c10e463d6857db2}{load\-\_\-stats} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md)
\item 
int \hyperlink{range__server_8c_a068eec82560ccfc202047038a186c866}{write\-\_\-stats} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md)
\item 
int \hyperlink{range__server_8c_a67d81ae80b7799b6bf558b32b10f81f1}{range\-\_\-server\-\_\-add\-\_\-work} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md, \hyperlink{structwork__item}{work\-\_\-item} $\ast$item)
\item 
\hyperlink{structwork__item}{work\-\_\-item} $\ast$ \hyperlink{range__server_8c_a573fdfe0a82cb3e48a4607bccd37ac76}{get\-\_\-work} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md)
\item 
int \hyperlink{range__server_8c_abac967b940a3b5aa92cc5fd67491efbe}{range\-\_\-server\-\_\-stop} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md)
\item 
int \hyperlink{range__server_8c_a69effcf76f690e1324650ffa216cd3e0}{range\-\_\-server\-\_\-put} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md, struct \hyperlink{structmdhim__putm__t}{mdhim\-\_\-putm\-\_\-t} $\ast$im, int source)
\item 
int \hyperlink{range__server_8c_acf4eb15dd578eb67350021764cd33644}{range\-\_\-server\-\_\-bput} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md, struct \hyperlink{structmdhim__bputm__t}{mdhim\-\_\-bputm\-\_\-t} $\ast$bim, int source)
\item 
int \hyperlink{range__server_8c_ad850088b2378dff726323e7524853585}{range\-\_\-server\-\_\-del} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md, struct \hyperlink{structmdhim__delm__t}{mdhim\-\_\-delm\-\_\-t} $\ast$dm, int source)
\item 
int \hyperlink{range__server_8c_adc8bdb750078dd2a2d0c7b0414670a44}{range\-\_\-server\-\_\-bdel} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md, struct \hyperlink{structmdhim__bdelm__t}{mdhim\-\_\-bdelm\-\_\-t} $\ast$bdm, int source)
\item 
int \hyperlink{range__server_8c_a627d6e42e21bbe440d663f64790cad39}{range\-\_\-server\-\_\-commit} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md, struct \hyperlink{structmdhim__basem__t}{mdhim\-\_\-basem\-\_\-t} $\ast$im, int source)
\item 
int \hyperlink{range__server_8c_aaf0d71a72f9a88327592c93d5959ed41}{range\-\_\-server\-\_\-get} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md, struct \hyperlink{structmdhim__getm__t}{mdhim\-\_\-getm\-\_\-t} $\ast$gm, int source, int op)
\item 
int \hyperlink{range__server_8c_adf44f3067182640c986252a7b95368ee}{range\-\_\-server\-\_\-bget} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md, struct \hyperlink{structmdhim__bgetm__t}{mdhim\-\_\-bgetm\-\_\-t} $\ast$bgm, int source)
\item 
int \hyperlink{range__server_8c_a1ebc876ff97109bc688a5690cbb2320a}{range\-\_\-server\-\_\-bget\-\_\-op} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md, struct \hyperlink{structmdhim__getm__t}{mdhim\-\_\-getm\-\_\-t} $\ast$gm, int source, int op)
\item 
void $\ast$ \hyperlink{range__server_8c_aa643c8c2955aaec54cffd88624cdf33e}{listener\-\_\-thread} (void $\ast$data)
\item 
void $\ast$ \hyperlink{range__server_8c_a6395e14f1667f32b638bae4d22a3771f}{worker\-\_\-thread} (void $\ast$data)
\item 
int \hyperlink{range__server_8c_af34269b3d0d34cd441697cc0e7376d3f}{range\-\_\-server\-\_\-init} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md)
\item 
int \hyperlink{range__server_8c_a8b635329923996a6897411dfc92e73db}{range\-\_\-server\-\_\-init\-\_\-comm} (struct \hyperlink{structmdhim__t}{mdhim\-\_\-t} $\ast$md)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{range__server_8c_a573fdfe0a82cb3e48a4607bccd37ac76}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!get\-\_\-work@{get\-\_\-work}}
\index{get\-\_\-work@{get\-\_\-work}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{get\-\_\-work}]{\setlength{\rightskip}{0pt plus 5cm}{\bf work\-\_\-item}$\ast$ get\-\_\-work (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md}
\end{DoxyParamCaption}
)}}\label{range__server_8c_a573fdfe0a82cb3e48a4607bccd37ac76}
get\-\_\-work Returns the next work item from the work queue


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the next \hyperlink{structwork__item}{work\-\_\-item} to process 
\end{DoxyReturn}
\hypertarget{range__server_8c_a6b69ffdb719e4f7c525be5849b15135d}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!im\-\_\-range\-\_\-server@{im\-\_\-range\-\_\-server}}
\index{im\-\_\-range\-\_\-server@{im\-\_\-range\-\_\-server}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{im\-\_\-range\-\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}int im\-\_\-range\-\_\-server (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md}
\end{DoxyParamCaption}
)}}\label{range__server_8c_a6b69ffdb719e4f7c525be5849b15135d}
is\-\_\-range\-\_\-server checks if I'm a range server


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if false, 1 if true 
\end{DoxyReturn}
\hypertarget{range__server_8c_aa643c8c2955aaec54cffd88624cdf33e}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!listener\-\_\-thread@{listener\-\_\-thread}}
\index{listener\-\_\-thread@{listener\-\_\-thread}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{listener\-\_\-thread}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ listener\-\_\-thread (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{range__server_8c_aa643c8c2955aaec54cffd88624cdf33e}
\hypertarget{range__server_8c_a928bd7ba32d87bcb0c10e463d6857db2}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!load\-\_\-stats@{load\-\_\-stats}}
\index{load\-\_\-stats@{load\-\_\-stats}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{load\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}int load\-\_\-stats (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md}
\end{DoxyParamCaption}
)}}\label{range__server_8c_a928bd7ba32d87bcb0c10e463d6857db2}
load\-\_\-stats Loads the statistics from the database


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_a67d81ae80b7799b6bf558b32b10f81f1}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!range\-\_\-server\-\_\-add\-\_\-work@{range\-\_\-server\-\_\-add\-\_\-work}}
\index{range\-\_\-server\-\_\-add\-\_\-work@{range\-\_\-server\-\_\-add\-\_\-work}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{range\-\_\-server\-\_\-add\-\_\-work}]{\setlength{\rightskip}{0pt plus 5cm}int range\-\_\-server\-\_\-add\-\_\-work (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md, }
\item[{{\bf work\-\_\-item} $\ast$}]{item}
\end{DoxyParamCaption}
)}}\label{range__server_8c_a67d81ae80b7799b6bf558b32b10f81f1}
range\-\_\-server\-\_\-add\-\_\-work Adds work to the work queue and signals the condition variable for the worker thread


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M structure \\
\hline
{\em item} & pointer to new work item that contains a message to handle \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S 
\end{DoxyReturn}
\hypertarget{range__server_8c_adc8bdb750078dd2a2d0c7b0414670a44}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!range\-\_\-server\-\_\-bdel@{range\-\_\-server\-\_\-bdel}}
\index{range\-\_\-server\-\_\-bdel@{range\-\_\-server\-\_\-bdel}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{range\-\_\-server\-\_\-bdel}]{\setlength{\rightskip}{0pt plus 5cm}int range\-\_\-server\-\_\-bdel (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md, }
\item[{struct {\bf mdhim\-\_\-bdelm\-\_\-t} $\ast$}]{bdm, }
\item[{int}]{source}
\end{DoxyParamCaption}
)}}\label{range__server_8c_adc8bdb750078dd2a2d0c7b0414670a44}
range\-\_\-server\-\_\-bdel Handles the bulk delete message and deletes the data from the database


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M struct \\
\hline
{\em bdm} & pointer to the bulk delete message to handle \\
\hline
{\em source} & source of the message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_adf44f3067182640c986252a7b95368ee}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!range\-\_\-server\-\_\-bget@{range\-\_\-server\-\_\-bget}}
\index{range\-\_\-server\-\_\-bget@{range\-\_\-server\-\_\-bget}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{range\-\_\-server\-\_\-bget}]{\setlength{\rightskip}{0pt plus 5cm}int range\-\_\-server\-\_\-bget (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md, }
\item[{struct {\bf mdhim\-\_\-bgetm\-\_\-t} $\ast$}]{bgm, }
\item[{int}]{source}
\end{DoxyParamCaption}
)}}\label{range__server_8c_adf44f3067182640c986252a7b95368ee}
range\-\_\-server\-\_\-bget Handles the bulk get message, retrieves the data from the database, and sends the results back


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M struct \\
\hline
{\em bgm} & pointer to the bulk get message to handle \\
\hline
{\em source} & source of the message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_a1ebc876ff97109bc688a5690cbb2320a}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!range\-\_\-server\-\_\-bget\-\_\-op@{range\-\_\-server\-\_\-bget\-\_\-op}}
\index{range\-\_\-server\-\_\-bget\-\_\-op@{range\-\_\-server\-\_\-bget\-\_\-op}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{range\-\_\-server\-\_\-bget\-\_\-op}]{\setlength{\rightskip}{0pt plus 5cm}int range\-\_\-server\-\_\-bget\-\_\-op (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md, }
\item[{struct {\bf mdhim\-\_\-getm\-\_\-t} $\ast$}]{gm, }
\item[{int}]{source, }
\item[{int}]{op}
\end{DoxyParamCaption}
)}}\label{range__server_8c_a1ebc876ff97109bc688a5690cbb2320a}
range\-\_\-server\-\_\-bget\-\_\-op Handles the get message given an op and number of records greater than 1


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M struct \\
\hline
{\em gm} & pointer to the get message to handle \\
\hline
{\em source} & source of the message \\
\hline
{\em op} & operation to perform \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_acf4eb15dd578eb67350021764cd33644}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!range\-\_\-server\-\_\-bput@{range\-\_\-server\-\_\-bput}}
\index{range\-\_\-server\-\_\-bput@{range\-\_\-server\-\_\-bput}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{range\-\_\-server\-\_\-bput}]{\setlength{\rightskip}{0pt plus 5cm}int range\-\_\-server\-\_\-bput (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md, }
\item[{struct {\bf mdhim\-\_\-bputm\-\_\-t} $\ast$}]{bim, }
\item[{int}]{source}
\end{DoxyParamCaption}
)}}\label{range__server_8c_acf4eb15dd578eb67350021764cd33644}
range\-\_\-server\-\_\-bput Handles the bulk put message and puts data in the database


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M struct \\
\hline
{\em bim} & pointer to the bulk put message to handle \\
\hline
{\em source} & source of the message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_a627d6e42e21bbe440d663f64790cad39}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!range\-\_\-server\-\_\-commit@{range\-\_\-server\-\_\-commit}}
\index{range\-\_\-server\-\_\-commit@{range\-\_\-server\-\_\-commit}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{range\-\_\-server\-\_\-commit}]{\setlength{\rightskip}{0pt plus 5cm}int range\-\_\-server\-\_\-commit (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md, }
\item[{struct {\bf mdhim\-\_\-basem\-\_\-t} $\ast$}]{im, }
\item[{int}]{source}
\end{DoxyParamCaption}
)}}\label{range__server_8c_a627d6e42e21bbe440d663f64790cad39}
range\-\_\-server\-\_\-commit Handles the commit message and commits outstanding writes to the database


\begin{DoxyParams}{Parameters}
{\em md} & pointer to the main M\-D\-H\-I\-M struct \\
\hline
{\em im} & pointer to the commit message to handle \\
\hline
{\em source} & source of the message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_ad850088b2378dff726323e7524853585}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!range\-\_\-server\-\_\-del@{range\-\_\-server\-\_\-del}}
\index{range\-\_\-server\-\_\-del@{range\-\_\-server\-\_\-del}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{range\-\_\-server\-\_\-del}]{\setlength{\rightskip}{0pt plus 5cm}int range\-\_\-server\-\_\-del (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md, }
\item[{struct {\bf mdhim\-\_\-delm\-\_\-t} $\ast$}]{dm, }
\item[{int}]{source}
\end{DoxyParamCaption}
)}}\label{range__server_8c_ad850088b2378dff726323e7524853585}
range\-\_\-server\-\_\-del Handles the delete message and deletes the data from the database


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M struct \\
\hline
{\em dm} & pointer to the delete message to handle \\
\hline
{\em source} & source of the message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_aaf0d71a72f9a88327592c93d5959ed41}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!range\-\_\-server\-\_\-get@{range\-\_\-server\-\_\-get}}
\index{range\-\_\-server\-\_\-get@{range\-\_\-server\-\_\-get}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{range\-\_\-server\-\_\-get}]{\setlength{\rightskip}{0pt plus 5cm}int range\-\_\-server\-\_\-get (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md, }
\item[{struct {\bf mdhim\-\_\-getm\-\_\-t} $\ast$}]{gm, }
\item[{int}]{source, }
\item[{int}]{op}
\end{DoxyParamCaption}
)}}\label{range__server_8c_aaf0d71a72f9a88327592c93d5959ed41}
range\-\_\-server\-\_\-get Handles the get message, retrieves the data from the database, and sends the results back


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M struct \\
\hline
{\em gm} & pointer to the get message to handle \\
\hline
{\em source} & source of the message \\
\hline
{\em op} & Operation to perform (M\-D\-H\-I\-M\-\_\-\-G\-E\-T\-\_\-\-E\-Q, M\-D\-H\-I\-M\-\_\-\-G\-E\-T\-\_\-\-N\-E\-X\-T, etc...) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_af34269b3d0d34cd441697cc0e7376d3f}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!range\-\_\-server\-\_\-init@{range\-\_\-server\-\_\-init}}
\index{range\-\_\-server\-\_\-init@{range\-\_\-server\-\_\-init}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{range\-\_\-server\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}int range\-\_\-server\-\_\-init (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md}
\end{DoxyParamCaption}
)}}\label{range__server_8c_af34269b3d0d34cd441697cc0e7376d3f}
range\-\_\-server\-\_\-init Initializes the range server (i.\-e., starts the threads and populates the relevant data in md)


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_a8b635329923996a6897411dfc92e73db}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!range\-\_\-server\-\_\-init\-\_\-comm@{range\-\_\-server\-\_\-init\-\_\-comm}}
\index{range\-\_\-server\-\_\-init\-\_\-comm@{range\-\_\-server\-\_\-init\-\_\-comm}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{range\-\_\-server\-\_\-init\-\_\-comm}]{\setlength{\rightskip}{0pt plus 5cm}int range\-\_\-server\-\_\-init\-\_\-comm (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md}
\end{DoxyParamCaption}
)}}\label{range__server_8c_a8b635329923996a6897411dfc92e73db}
range\-\_\-server\-\_\-init\-\_\-comm Initializes the range server communicator that is used for range server to range server collectives The stat flush function will use this communicator


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_a69effcf76f690e1324650ffa216cd3e0}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!range\-\_\-server\-\_\-put@{range\-\_\-server\-\_\-put}}
\index{range\-\_\-server\-\_\-put@{range\-\_\-server\-\_\-put}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{range\-\_\-server\-\_\-put}]{\setlength{\rightskip}{0pt plus 5cm}int range\-\_\-server\-\_\-put (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md, }
\item[{struct {\bf mdhim\-\_\-putm\-\_\-t} $\ast$}]{im, }
\item[{int}]{source}
\end{DoxyParamCaption}
)}}\label{range__server_8c_a69effcf76f690e1324650ffa216cd3e0}
range\-\_\-server\-\_\-put Handles the put message and puts data in the database


\begin{DoxyParams}{Parameters}
{\em md} & pointer to the main M\-D\-H\-I\-M struct \\
\hline
{\em im} & pointer to the put message to handle \\
\hline
{\em source} & source of the message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_abac967b940a3b5aa92cc5fd67491efbe}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!range\-\_\-server\-\_\-stop@{range\-\_\-server\-\_\-stop}}
\index{range\-\_\-server\-\_\-stop@{range\-\_\-server\-\_\-stop}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{range\-\_\-server\-\_\-stop}]{\setlength{\rightskip}{0pt plus 5cm}int range\-\_\-server\-\_\-stop (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md}
\end{DoxyParamCaption}
)}}\label{range__server_8c_abac967b940a3b5aa92cc5fd67491efbe}
range\-\_\-server\-\_\-stop Stop the range server (i.\-e., stops the threads and frees the relevant data in md)


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_a9d1efa04e20d7fe6fa8d6e4aa6568c25}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!send\-\_\-locally\-\_\-or\-\_\-remote@{send\-\_\-locally\-\_\-or\-\_\-remote}}
\index{send\-\_\-locally\-\_\-or\-\_\-remote@{send\-\_\-locally\-\_\-or\-\_\-remote}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{send\-\_\-locally\-\_\-or\-\_\-remote}]{\setlength{\rightskip}{0pt plus 5cm}int send\-\_\-locally\-\_\-or\-\_\-remote (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md, }
\item[{int}]{dest, }
\item[{void $\ast$}]{message}
\end{DoxyParamCaption}
)}}\label{range__server_8c_a9d1efa04e20d7fe6fa8d6e4aa6568c25}
send\-\_\-locally\-\_\-or\-\_\-remote Sends the message remotely or locally


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M structure \\
\hline
{\em dest} & Destination rank \\
\hline
{\em message} & pointer to message to send \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_a599eb8c7ba52257c76deca96460ac131}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!set\-\_\-store\-\_\-opts@{set\-\_\-store\-\_\-opts}}
\index{set\-\_\-store\-\_\-opts@{set\-\_\-store\-\_\-opts}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{set\-\_\-store\-\_\-opts}]{\setlength{\rightskip}{0pt plus 5cm}void set\-\_\-store\-\_\-opts (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md, }
\item[{struct {\bf mdhim\-\_\-store\-\_\-opts\-\_\-t} $\ast$}]{opts, }
\item[{int}]{stat}
\end{DoxyParamCaption}
)}}\label{range__server_8c_a599eb8c7ba52257c76deca96460ac131}
\hypertarget{range__server_8c_ab006df9333fd5eace9b3123724c81e74}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!update\-\_\-all\-\_\-stats@{update\-\_\-all\-\_\-stats}}
\index{update\-\_\-all\-\_\-stats@{update\-\_\-all\-\_\-stats}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{update\-\_\-all\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}int update\-\_\-all\-\_\-stats (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md, }
\item[{void $\ast$}]{key, }
\item[{uint32\-\_\-t}]{key\-\_\-len}
\end{DoxyParamCaption}
)}}\label{range__server_8c_ab006df9333fd5eace9b3123724c81e74}
update\-\_\-all\-\_\-stats Adds or updates the given stat to the hash table


\begin{DoxyParams}{Parameters}
{\em md} & pointer to the main M\-D\-H\-I\-M structure \\
\hline
{\em key} & pointer to the key we are examining \\
\hline
{\em key\-\_\-len} & the key's length \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
\hypertarget{range__server_8c_a6395e14f1667f32b638bae4d22a3771f}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!worker\-\_\-thread@{worker\-\_\-thread}}
\index{worker\-\_\-thread@{worker\-\_\-thread}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{worker\-\_\-thread}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ worker\-\_\-thread (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{range__server_8c_a6395e14f1667f32b638bae4d22a3771f}
\hypertarget{range__server_8c_a068eec82560ccfc202047038a186c866}{\index{range\-\_\-server.\-c@{range\-\_\-server.\-c}!write\-\_\-stats@{write\-\_\-stats}}
\index{write\-\_\-stats@{write\-\_\-stats}!range_server.c@{range\-\_\-server.\-c}}
\subsubsection[{write\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}int write\-\_\-stats (
\begin{DoxyParamCaption}
\item[{struct {\bf mdhim\-\_\-t} $\ast$}]{md}
\end{DoxyParamCaption}
)}}\label{range__server_8c_a068eec82560ccfc202047038a186c866}
write\-\_\-stats Writes the statistics stored in a hash table to the database


\begin{DoxyParams}{Parameters}
{\em md} & Pointer to the main M\-D\-H\-I\-M structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
M\-D\-H\-I\-M\-\_\-\-S\-U\-C\-C\-E\-S\-S or M\-D\-H\-I\-M\-\_\-\-E\-R\-R\-O\-R on error 
\end{DoxyReturn}
